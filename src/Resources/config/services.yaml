services:
  # default configuration for services in *this* file
  _defaults:
    autowire: true      # Automatically injects dependencies in your services.
    autoconfigure: true # Automatically registers your services as commands, event subscribers, etc.
    public: false

  Tourze\StockCostBundle\Service\:
    resource: '../../Service/'

  Tourze\StockCostBundle\Repository\:
    resource: '../../Repository/'

  Tourze\StockCostBundle\EventListener\:
    resource: '../../EventListener/'

  # CRUD控制器
  Tourze\StockCostBundle\Controller\:
    resource: '../../Controller/'
    tags: ['controller.service_arguments']

  # 成本计算器
  Tourze\StockCostBundle\Service\Calculator\:
    resource: '../../Service/Calculator/'

  # 成本服务配置
  Tourze\StockCostBundle\Service\CostService:
    arguments:
      $calculators:
        - '@Tourze\StockCostBundle\Service\Calculator\FifoCostCalculator'
        - '@Tourze\StockCostBundle\Service\Calculator\LifoCostCalculator'
        - '@Tourze\StockCostBundle\Service\Calculator\WeightedAverageCostCalculator'
        - '@Tourze\StockCostBundle\Service\Calculator\StandardCostCalculator'

  # 成本记录服务（需要显式声明以支持测试）
  Tourze\StockCostBundle\Service\CostRecordService:
    public: true
